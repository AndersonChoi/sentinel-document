# OGG
원본 DB의 테이블을 DIC 클러스터로 연동하기 위하여 사용하는 방법 중 하나 입니다. OGG (Oracle Golden Gate)를 사용해 원본 DB의 테이블을 커머스 센터 내 미리 준비된 분석 DB에 연동하게 됩니다. 그 후 분석 DB로부터 주기적으로 테이블 스냅샷 파일을 추출해 DIC 클러스터에 적재합니다.

## 장점
* 데이터 추출을 위한 부하를 원본 DB가 아닌 분석 DB가 대신 감당하게 되므로 최초 구축 후에는 원본 DB에 부하가 발생하지 않습니다.
* 파일 추출 시 필요한 변환, 클랜징 작업은 미리 정의된 배치 잡을 통해서 이루어지며 이에 따라 데이터의 퀄리티가 균일해집니다.

## 제약 사항
* 원본 DB가 오라클 11g 이상인 경우만 사용 가능합니다.
* OGG를 사용하기 위해서 DB가 WAL 로그에 외부 싱크를 위한 정보를 추가로 남기는 옵션을 적용해야 합니다. 이 옵션을 최초 적용하려면 DB 서버 다운 타임이 발생합니다.

## 신청 절차
1. 연동 요청자는 BM별로 DE팀 담당자와 컨택하여 연동해야할 원본 DB의 테이블을 지정합니다.
2. 연동 방법이 OGG로 결정되면 연동될 분석 DB를 지정합니다.
3. DE팀은 SE팀에 원본 DB, 분석 DB 간 OGG 연동을 요청합니다.
4. SE팀은 OGG 를 사용해 연동 잡을 구축합니다.
5. 연동 요청자는 [DI팀 JIRA 고객센터](http://jira.skplanet.com/servicedesk/customer/portal/49) 를 통해 신규 데이터 입수를 요청합니다. DI팀과 상의해 [센티넬](http://sentinel.skplanet.com:8080)에서 인터페이스 정의서를 작성할 프로젝트를 지정, 인터페이스 정의서를 (추가) 작성합니다.
    - [센티넬 프로젝트 작성 메뉴얼](http://sentinel.skplanet.com:8080/docs/dbschema)
6. DI팀은 센티넬 프로젝트 내 인터페이스 정의서를 참고해 배치 잡을 등록합니다.

## 생성되는 테이블
* DIC 클러스터 하이브에 생성되는 테이블은 기본적으로 
    - 인터페이스 정의서에 암호화 요청된 필드는 DIC 규격대로 암호화되어 적재됩니다. 복호화가 필요할 경우 [위키 가이드 페이지](http://wiki.skplanet.com/pages/viewpage.action?pageId=55452400)를 참고하세요.
    - 추출 주기마다 새로운 파티션이 생성되며 테이블의 모든 레코드가 새 파티션에 적재됩니다. 따라서 테이블 사용 시 파티션 하나만 지정해서 조회하시면 됩니다. (최신 파티션을 알 수 없다는 문제가 있으며 이에 따라 뷰 또는 조회용 테이블을 별도 마련하는 방안을 준비중입니다.)